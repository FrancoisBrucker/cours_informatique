<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Exercices</title>

    <link href="/cours_informatique/assets/node_modules/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet">
    <link href="/cours_informatique/assets/node_modules/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">

    <link href="/cours_informatique/assets/stylesheets/main.css" rel="stylesheet">

  </head>
  <body>
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            [
              '$', '$'
            ],
            [
              '\\(', '\\)'
            ]
          ]
        },
        svg: {
          fontCache: 'global'
        }
      };

      function goTop() {
        window.scrollTo({top: 0});
      }
      function goBottom() {
        window.scrollTo({top: document.body.scrollHeight});
      }
    </script>
    <script type="text/javascript" id="MathJax-script" src="/cours_informatique/assets/node_modules/mathjax/es5/tex-svg-full.js"></script>

    <header class="border-b-2 border-gray-200 mb-4">
      <div class="max-w-[1200px] mx-auto px-4 relative">
        <div class="min-h-[50px] flex justify-between items-center">
          <a class="mx-2" href="/cours_informatique/">Home</a>
        </div>

        <div class="min-h-[50px] flex justify-center items-center absolute right-0 top-0">
          <a class="mx-2" href="/cours_informatique/about">About</a>
          <button onclick="goTop()" id="myBtn" title="Go to top">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 11.25l-3-3m0 0l-3 3m3-3v7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </button>

          <button onclick="goBottom()" id="myBtn" title="Go to top">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </button>
        </div>

      </div>
    </header>

    <main class="max-w-[1200px] mx-auto px-4">
      
<article>

  <h1>Exercices</h1>
  <div>
    

    
  </div>

  

    
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-purple-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path>
</svg>
<div class="pl-8 mr-8">

<a class="interne" href="/cours_informatique/cours/">Cours</a><span class="px-1">/</span><a class="interne" href="/cours_informatique/cours/système/">Système</a><span class="px-1">/</span><a class="interne" href="/cours_informatique/cours/système/linux/">Linux</a><span class="px-1">/</span><a class="interne" href="/cours_informatique/cours/système/linux/scripting/">Scripting</a><span class="px-1">/</span><a class="interne" href="/cours_informatique/cours/système/linux/scripting/exercices/">Exercices</a>

</div>
</div>


    
  

  <h2>Fichiers</h2>
<ol>
<li>Quel est le chemin de votre dossier maison</li>
<li>Quels sont les fichiers présents ?</li>
<li>Quel est la différence entre :
<ul>
<li><code>ls</code></li>
<li><code>ls -l</code></li>
<li><code>ls -a</code></li>
<li><code>ls -la</code></li>
</ul>
</li>
<li>Créez un dossier <code class="fichier">temporaire</code> dans votre dossier maison. Quels sont les droits de ce fichier ?</li>
<li>Affichez la liste des fichiers par date de dernière modification/création (c'est une option de <code>ls</code>). Le dossier <code class="fichier">temporaire</code> devrait être en premier.</li>
<li>Modifier la date de modification du dossier modifié le dernier (grace à la commande <code>touch</code>) et vérifier qu'il est maintenant en premier dans la liste</li>
<li>Que fait <code>touch fichier</code> si <code class="fichier">fichier</code> n'existe pas ?</li>
<li>Affichez les 3 éléments plus récemment modifiés, puis les 5 moins récemment modifié (vous pouvez utiliser les commandes <code>head</code> et <code>tail</code>)</li>
<li>Copiez le fichier <code>/etc/passwd</code> dans le dossier <code class="fichier">${HOME}/temporaire</code> créé précédemment et appelez le mot-de-passe, le tout en une seule commande</li>
<li>Supprimez le dossier <code class="fichier">${HOME}/temporaire</code> en une seule commande <code>rm</code></li>
<li>Créez un dossier <code>private</code> dans maison et modifiez ses droits pour qu'il ne soit accessible que de vous même. Faites cette modification en utilisant la notation symbolique.</li>
<li>À quoi correspondent ces droits en notation <a href="https://docs.oracle.com/cd/E19504-01/802-5750/6i9g464pv/index.html">octale</a> ?</li>
<li>Créez un fichier nommé <code>hello.txt</code> dans votre dossier maison contenant le texte &quot;bonjour&quot; avec un éditeur de texte (nano par exemple)</li>
<li>Ajoutez &quot; monde !&quot; à la fin du fichier <code>hello.txt</code> avec une commande commande echo</li>
<li>Déplacez le fichier <code>hello.txt</code> dans le dossier <code>private</code></li>
<li>Créez un lien symbolique dans votre maison vers le fichier <code>hello.txt</code> de votre dossier private.</li>
<li>Modifiez le contenu du fichier symbolique pour son contenu soit sur une seule ligne (vous pourrez vous aider de la commande <code>tr</code> et de <a href="https://www.baeldung.com/linux/join-multiple-lines">ce tutoriel</a>)</li>
<li>Afficher, avec la commande <code>cat</code>, le contenu du fichier dans <code>private/hello.txt</code></li>
<li>Que se passe-t-il pour le lien si vous supprimez ou renommez le fichier original ?</li>
<li>Créez avec <code>nano</code> un fichier nommé <code ,.fichier="">brise marine.txt</code> et mettez-y le <a href="https://www.poetica.fr/poeme-109/stephane-mallarme-brise-marine/">poème de Mallarmé</a></li>
<li>Affichez ce fichier avec la commande <code>cat</code> en <a href="https://www.shellscript.sh/escape.html">escapant</a> le métacaractère espace</li>
<li>renommez, avec la commande <code>mv</code> le fichier <code class="fichier">brise marine.txt</code> en <code class="fichier">brise_marine.txt</code></li>
</ol>
<h2>Personnalisation</h2>
<p>Le fichier <code class="fichier">.bashrc</code> crée un alias <code>ll</code>. À quoi cela correspond-t-il ?</p>
<p>Créez dans un shell les deux alias suivant :</p>
<ul>
<li><code>cd..</code> pour <code>cd ..</code></li>
<li><code>cd...</code> pour <code>cd ../..</code>.</li>
</ul>
<p>Le fichier de configuration <code class="fichier">.bashrc</code> tente d'exécuter un fichier dédié aux alias. Lequel ? Ajoutez y vos deux nouveaux alias pour qu'ils soient toujours disponible.</p>
<h2>find</h2>
<p><a href="https://shapeshed.com/unix-find/">find</a><br>
trouver les fichiers qui ont été modifié il y a moins de 7 jours (find . -mtime +30 -print)</p>
<p>Déterminez quel est le dossier contenant le plus de méga de votre système.(du -h | sort -h | tail)</p>
<h2>Process</h2>
<ol>
<li>Lister tous les process de tous les utilisateurs (avec la commande <code>ps</code> et ses options)</li>
<li>Les compter (avec la commande <code>wc</code>)</li>
<li>Comptez uniquement les process de root puis les vôtres (avec l'aide de la commande <code>grep</code>)</li>
<li>À l\aide de deux terminaux :
<ol>
<li>ouvrir un <code>nano</code> dans lun,</li>
<li>à l'aide de son PID, tuer le process <code>nano</code> dans l'autre terminal.</li>
</ol>
</li>
</ol>
<h2>Sur une machine de l'ecm</h2>
<h3>Connection aux sas</h3>
<p>En groupe.</p>
<p>Pour vous connecter à une machine d'un réseau local, il faut souvent se connecter à un sas, le seul qui a une adresse internet réelle. Pour les étudiants de l'ecm cette machine s'appelle <code>sas1.ec-m.fr</code>. Une fois connecté sur le sas, il est possible de se connecter à toute autre machine allumé du réseau.</p>
<ol>
<li>Connectez-vous tous sur la même machine de l'ecm :
<ol>
<li>Si vous êtes sur votre propre machine, commencez par vous connecter sur la machine <code>sas1.ec-m.fr</code> avec la commande <code>ssh</code> (<code>ssh son_login@nom_de_sa_machine</code>).</li>
<li>De la machine <code>sas1.ec-m.fr</code> connectez vous tous sur la même autre machine.</li>
</ol>
</li>
<li>Vérifiez que vous êtes tous connecté sur cette machine (commandes <code>who</code>, <code>w</code> ou encore <code>users</code>)</li>
<li>cCréez un fichier vide de nom votre prénom dans le dossier <code>/tmp</code> (faite le avec la commande <code>touch</code>)</li>
<li>Essayez de supprimer un fichier créé par un de vos camarades</li>
<li>Vous devriez avoir un groupe en commun : commande <code>groups</code> ou <code>id -a</code></li>
<li>Modifiez les droits de votre fichier dans <code class="fichier">/tmp</code> pour que son groupe soit le groupe que vous avez en commun et permettez son écriture.</li>
<li>Modifiez le contenu d'un fichier de votre voisin en ajoutant votre nom à la fin de son contenu</li>
<li>Connectez-vous depuis un autre terminal de votre machine perso sur le <code>sas1.ec-m.fr</code>.</li>
<li>Trouve le PID de la première connection et tuez là. La mort de ce process a tué tous ses enfants, y compris la connection sur l'autre machine allumée de l'ecm.</li>
<li>Créez un dossier <code class="fichier">~/private/</code> uniquement lisible par vous mais exécutable par tout le monde. Tout le monde peut donc entrer dans <code class="fichier">~/private/</code> mais pas lire son contenu</li>
<li>Créez dans <code class="fichier">~/private/</code> un dossier avec un nom secret. Donnez les droits d'écriture à tout le monde à ce dossier</li>
<li>demandez à votre voisin de placer un fichier dans ce dossier. Il peut le faire s'il connaît le nom secret, mais il lui est impossible de lire le contenu du dossier <code class="fichier">~/private/</code>.
<ol>
<li>comment est-ce possible ?</li>
<li>comment peut-on utiliser cette technique ?</li>
</ol>
</li>
</ol>
<h3>Web</h3>
<p>Vous avez un répertoire <code class="fichier">html</code> sur votre compte. Tout ce qui est placé dans ce répertoire est accessible via le serveur web de l'école. Vous pouvez donc l'utiliser pour créer votre site perso ou tout simplement pour mettre a disposition certains fichiers.</p>
<p>Vérifiez que tout fonctionne :</p>
<ol>
<li>lancez le navigateur/browser web <code>firefox</code></li>
<li>vérifiez que vous accédez a votre espace web perso sous la forme <a href="http://prenom.nom.perso.centrale-marseille.fr">http://prenom.nom.perso.centrale-marseille.fr</a></li>
</ol>
<p>Le principe est simple : tout ce qui est précisé apres <a href="http://prenom.nom.perso.centrale-marseille.fr">http://prenom.nom.perso.centrale-marseille.fr</a> est relatif a votre repertoire <code class="fichier">~/html</code>. Ainsi <a href="http://prenom.nom.perso.centrale-marseille.fr/toto.txt">http://prenom.nom.perso.centrale-marseille.fr/toto.txt</a> désigne le fichier <code class="fichier">toto.txt</code> qui est <code class="fichier">~/html/toto.txt</code></p>
<ol>
<li>À quel fichier correspond l'url <a href="http://prenom.nom.perso.centrale-marseille.fr/a/b/c/d/tutu.txt">http://prenom.nom.perso.centrale-marseille.fr/a/b/c/d/tutu.txt</a> ?</li>
<li>Copiez avec <a href="https://linuxize.com/post/how-to-use-scp-command-to-securely-transfer-files/">la commande <code>scp</code></a> depuis votre propre ordinateur jusqu'au dossier <code>~/html/</code> de l'ordinateur <code>sas1.ec-m.fr</code> le fichier <code>brise_marine.txt</code>.</li>
<li>Vérifiez que <code>brise_marine.txt</code> est bien accessible depuis votre site personnel de l'ecm.</li>
<li>Téléchargez <code>brise_marine.txt</code> avec la commande <a href="https://www.youtube.com/watch?v=APtOavXTv5M&amp;list=PLShDm2AZYnK1SdG3dufPdCqk08sOahUBP&amp;index=9"><code>curl</code></a></li>
<li>Déplacez le fichier <code class="fichier">~/html/brise_marine.txt</code> dans le répertoire <code class="fichier">~/html/visible</code></li>
<li>Essayez de voir le contenu de ce repertoire via le navigateur. Quelle difference de fonctionnement avec le cas precedent ?</li>
<li>Déplacez le fichier <code class="fichier">~/html/visible/brise_marine.txt</code> dans le dossier <code>~/html/intranet</code>.</li>
<li>Quelle difference de fonctionnement avec les 2 cas precedents ?</li>
<li>Une url peut être utilisée comme un mot de passe pour accéder à une ressource puisqu'il est impossible <strong>depuis l'extérieur</strong> de connaître toutes les url accessibles. En revanche pour une personne connectée au réseau, elle peut visiter l'arborescence de <code>~/html/</code>. Comment protéger les fichier à cacher tout en les laissant accessible de l'extérieur ?</li>
</ol>
<h2>Que fait ça ?</h2>
<p>Vu dans un fichier de configuration d'un nouvel utilisateur :</p>
<pre class="language-shell " style="counter-reset: linenumber 0"><code class="language-shell"><span class="token assign-left variable">password</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">cat</span> /dev/urandom <span class="token operator">|</span> <span class="token function">tr</span> <span class="token parameter variable">-dc</span> <span class="token string">'a-zA-Z0-9'</span> <span class="token operator">|</span> <span class="token function">fold</span> <span class="token parameter variable">-w</span> <span class="token number">8</span> <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-n</span> <span class="token number">1</span><span class="token variable">)</span></span>
</code></pre>
<blockquote>
<p>TBD en ajouter d'autres</p>
</blockquote>


</article>
    </main>

    <footer class="min-h-[50px] border-t-2 border-gray-200 mt-4">
      <div class="max-w-[1200px] mx-auto px-4 relative">
        <div class="min-h-[50px] flex justify-center items-center">
          <p>
            Cours d'informatique à l'école centrale Marseille
          </p>
        </div>
        <div class="min-h-[50px] flex justify-center items-center absolute right-0 top-0">
          <button onclick="goTop()" id="myBtn" title="Go to top">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 11.25l-3-3m0 0l-3 3m3-3v7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </button>

          <button onclick="goBottom()" id="myBtn" title="Go to top">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </button>
        </div>

      </div>
    </footer>

    <script>
      MathJax
        .startup
        .document
        .getMathItemsWithin(document.body);
    </script>

  </body>
</html>