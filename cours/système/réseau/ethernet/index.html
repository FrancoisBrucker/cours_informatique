<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Ethernet</title>

    <link href="/cours_informatique/assets/node_modules/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet">
    <link href="/cours_informatique/assets/node_modules/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">

    <link href="/cours_informatique/assets/stylesheets/main.css" rel="stylesheet">

  </head>
  <body>
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            [
              '$', '$'
            ],
            [
              '\\(', '\\)'
            ]
          ]
        },
        svg: {
          fontCache: 'global'
        }
      };

      function goTop() {
        window.scrollTo({top: 0});
      }
      function goBottom() {
        window.scrollTo({top: document.body.scrollHeight});
      }
    </script>
    <script type="text/javascript" id="MathJax-script" src="/cours_informatique/assets/node_modules/mathjax/es5/tex-svg-full.js"></script>

    <header class="border-b-2 border-gray-200 mb-4">
      <div class="max-w-[1200px] mx-auto px-4 relative">
        <div class="min-h-[50px] flex justify-between items-center">
          <a class="mx-2" href="/cours_informatique/">Home</a>
        </div>

        <div class="min-h-[50px] flex justify-center items-center absolute right-0 top-0">
          <a class="mx-2" href="/cours_informatique/about">About</a>
          <button onclick="goTop()" id="myBtn" title="Go to top">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 11.25l-3-3m0 0l-3 3m3-3v7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </button>

          <button onclick="goBottom()" id="myBtn" title="Go to top">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </button>
        </div>

      </div>
    </header>

    <main class="max-w-[1200px] mx-auto px-4">
      
<article>

  <h1>Ethernet</h1>
  <div>
    

    
  </div>

  

    
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-purple-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path>
</svg>
<div class="pl-8 mr-8">

<a class="interne" href="/cours_informatique/cours/">Cours</a><span class="px-1">/</span><a class="interne" href="/cours_informatique/cours/système/">Système</a><span class="px-1">/</span><a class="interne" href="/cours_informatique/cours/système/réseau/">Réseau</a><span class="px-1">/</span><a class="interne" href="/cours_informatique/cours/système/réseau/ethernet/">Ethernet</a>

</div>
</div>


    
  

  <div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-lime-500 bg-lime-100">
  <svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-lime-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"></path>
  </svg>
<div class="pl-8 mr-8">
<p><a href="ethernet" class="interne">Ethernet</a></p>
</div>
</div>
<p>Le schema classique d'un réseau Ethernet est :</p>
<pre><code>   A  B     C
   |  |     |
----------------- : hub
         |
         D
</code></pre>
<p>Toutes les machines sont connectées deux à deux, Le hub permettant de retransmettre une donnée arrivant à tous les participants du réseau. Il n'est donc pas nécessaire d'avoir de routage puisque toutes les données sont envoyées à tout le monde, mais il faut tout de même un protocole pour s'assurer que chaque participant puisse reconnaître les données qui lui sont adressées. Ceci se fait via l'adresse MAC de la carte réseau.</p>
<h2>Adresse MAC</h2>
<p>Chaque <code>interface</code> (ie carte réseau, comme <code>en0</code> par exemple) a une <a href="https://fr.wikipedia.org/wiki/Adresse_MAC">adresse MAC</a> :</p>
<pre class="language-shell " style="counter-reset: linenumber 0"><code class="language-shell">$ <span class="token function">ip</span> <span class="token function">link</span> show en1
en1: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">886</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,BROADCAST,SMART,RUNNING,SIMPLEX,MULTICAST<span class="token operator">></span> mtu <span class="token number">1500</span>
	<span class="token assign-left variable">options</span><span class="token operator">=</span><span class="token number">40</span><span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>CHANNEL_IO<span class="token operator">></span>
	ether <span class="token number">38</span>:f9:d3:17:40:bd 
	nd6 <span class="token assign-left variable">options</span><span class="token operator">=</span><span class="token number">20</span><span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>PERFORMNUD,DAD<span class="token operator">></span>
	media: autoselect
	status: active

</code></pre>
<p>L'adresse MAC de cet ordinateur (un mac) est : <code>38:f9:d3:17:40:bd</code>. Les 3 premiers octets (moins les 2 premiers bits) correspondent au fabriquant (ici apple) et les trois derniers sont aléatoires.</p>
<div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-emerald-500 bg-emerald-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-emerald-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
  <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"></path>
</svg>
<div class="pl-8 mr-8">
<p><a href="https://aruljohn.com/mac.pl">MAC address lookup</a></p>
</div>
</div>
<p>L'idée est que dans un réseau local, il n'y ait pas deux machine avec la même adresse MAC, ce qui va identifier de façon unique un ordinateur.</p>
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-cyan-500 bg-cyan-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-cyan-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
</svg>
<div class="pl-8 mr-8">
<p>On peut changer la mac adresse de façon logicielle, et donc se faire passer pour quelqu'un d'autre sur un réseau Ethernet. C'est le <a href="https://wiki.archlinux.org/title/MAC_address_spoofing_(Fran%C3%A7ais)">MAC spoofing</a>.</p>
</div>
</div>
<h2>Ethernet</h2>
<p>On parle de <em><strong>trame Ethernet</strong></em> (<em>Ethernet frame</em>) et non pas de paquet Ethernet. L'<a href="https://fr.wikipedia.org/wiki/Ethernet#Trames_Ethernet">entête</a> du paquet Ethernet contient principalement :</p>
<ul>
<li>l'adresse MAC source</li>
<li>l'adresse MAC destination</li>
<li>la taille du paquet</li>
<li>un checksum</li>
</ul>
<p>Le paquet est émit sur toute la lan et seule la machine correspondant à l'adresse MAC destination l'ouvre. Ce protocole est donc tout simple : on hurle dans le réseau et celui qui doit écouter entent, les autres font semblant de ne rien avoir entendu.</p>
<p>Le problème arrive quand deux ordinateurs parlent en même temps. Les deux messages vont arriver détériorés à l'arrivée. Le protocole Ethernet gère cela de façon simple, en utilisant l'algorithme dit <a href="https://fr.wikipedia.org/wiki/Carrier_Sense_Multiple_Access_with_Collision_Detection">CSMA/CD</a>, comme on le ferait dans une salle bondée :</p>
<ol>
<li>on commence par attendre que personne n'émette</li>
<li>puis on envoie son message par trame, en attendant entre chaque trame un temps déterminé</li>
<li>s'il y a une collision on arrête d'émettre pendant un temps aléatoire et retour en 1.</li>
</ol>
<p>L'attente entre chaque trames permet à plusieurs communication d'avoir lieu simultanément. Dans les réseau LAN Wifi (ou avec des ponts), il faut un peu modifier cet algorithme car il devient impossible de détecter des collisions. Dans le cas ci-après, A et B voient la borne mais ils ne voient pas leurs ondes respectives :</p>
<pre><code>  A     X      B
</code></pre>
<p>Dans ce cas là, il faut demander la permission à la borne Wifi d'émettre  et c'est elle qui intime aux autres ordinateurs de ne rien émettre. Cette méthode est appelée CSMA/CA. Voir le lien ci-après :</p>
<div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-emerald-500 bg-emerald-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-emerald-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
  <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"></path>
</svg>
<div class="pl-8 mr-8">
<p><a href="https://www.youtube.com/watch?v=UgQM0rVDIQE">hidden node problem</a></p>
</div>
</div>
<p>Plus le réseau est brouillé, plus il va y avoir de collisions et, pire encore, il va s'adapter à l'émetteur le plus lent. C'est pourquoi il ne faut pas jouer sur un réseau Wifi : trop de paquets sont perdus.</p>
<p>Il reste un problème à résoudre, comment connaître l'adresse MAC du destinataire alors que l'on a que son adresse IP à disposition.</p>
<h2>ARP et NDS</h2>
<p>IL existe un protocole spéciale lié à IP pour retrouver l'adresse MAC à partir d'une adresse IP. Ce protocole s'appelle <a href="https://fr.wikipedia.org/wiki/Address_Resolution_Protocol">ARP</a> pour IPv4 et <a href="https://fr.wikipedia.org/wiki/Neighbor_Discovery_Protocol">NDP</a> pour IVv6</p>
<div class="quote relative py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-emerald-500 bg-emerald-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-emerald-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
  <path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"></path>
</svg>
<div class="pl-8 mr-8">
<p><a href="https://docs.oracle.com/cd/E19957-01/820-2982/chapter1-41/index.html">NDP vs arp</a></p>
</div>
</div>
<p>Ce protocole envoie simplement une requête sur la LAN et demande qui possède cette adresse IP. Pour éviter de faire cette demande à chaque fois, l'ordinateur demandeur va conserver une table de correspondance.</p>
<pre><code>ip nei
</code></pre>
<p>Permet de connaître cette table de correspondance.</p>


</article>
    </main>

    <footer class="min-h-[50px] border-t-2 border-gray-200 mt-4">
      <div class="max-w-[1200px] mx-auto px-4 relative">
        <div class="min-h-[50px] flex justify-center items-center">
          <p>
            Cours d'informatique à l'école centrale Marseille
          </p>
        </div>
        <div class="min-h-[50px] flex justify-center items-center absolute right-0 top-0">
          <button onclick="goTop()" id="myBtn" title="Go to top">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 11.25l-3-3m0 0l-3 3m3-3v7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </button>

          <button onclick="goBottom()" id="myBtn" title="Go to top">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </button>
        </div>

      </div>
    </footer>

    <script>
      MathJax
        .startup
        .document
        .getMathItemsWithin(document.body);
    </script>

  </body>
</html>