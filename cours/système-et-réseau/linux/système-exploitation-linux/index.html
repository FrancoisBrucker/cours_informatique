<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Système d&#39;exploitation Linux</title>

    <link href="/cours_informatique/assets/node_modules/prismjs/themes/prism-solarizedlight.min.css" rel="stylesheet">
    <link href="/cours_informatique/assets/node_modules/prismjs/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">

    <link href="/cours_informatique/assets/stylesheets/main.css" rel="stylesheet">

  </head>
  <body>
    <script>
      window.MathJax = {
        tex: {
          inlineMath: [
            [
              '$', '$'
            ],
            [
              '\\(', '\\)'
            ]
          ]
        },
        svg: {
          fontCache: 'global'
        }
      };

      function goTop() {
        window.scrollTo({top: 0});
      }
      function goBottom() {
        window.scrollTo({top: document.body.scrollHeight});
      }
    </script>
    <script type="text/javascript" id="MathJax-script" src="/cours_informatique/assets/node_modules/mathjax/es5/tex-svg-full.js"></script>

    <header class="border-b-2 border-gray-200 mb-4">
      <div class="max-w-[1200px] mx-auto px-4 relative">
        <div class="min-h-[50px] flex justify-between items-center">
          <a class="mx-2" href="/cours_informatique/">Home</a>
        </div>

        <div class="min-h-[50px] flex justify-center items-center absolute right-0 top-0">
          <a class="mx-2" href="/cours_informatique/about">About</a>
          <button onclick="goTop()" id="myBtn" title="Go to top">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 11.25l-3-3m0 0l-3 3m3-3v7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </button>

          <button onclick="goBottom()" id="myBtn" title="Go to top">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </button>
        </div>

      </div>
    </header>

    <main class="max-w-[1200px] mx-auto px-4">
      
<article>

  <h1>Système d&#39;exploitation Linux</h1>
  <div>
    

    
  </div>

  

    
<div class="quote relative  py-2 drop-shadow rounded rounded-tl-none rounded-bl-none border-solid border-l-8 border-purple-500 bg-purple-100">
<svg class="absolute w-7 h-7 pl-1 pt-0.5 pb-0.5 text-purple-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
  <path stroke-linecap="round" stroke-linejoin="round" d="M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"></path>
</svg>
<div class="pl-8 mr-8">

<a class="interne" href="/cours_informatique/cours/">Cours</a><span class="px-1">/</span><a class="interne" href="/cours_informatique/cours/système-et-réseau/">Système et réseau</a><span class="px-1">/</span><a class="interne" href="/cours_informatique/cours/système-et-réseau/linux/">Linux</a><span class="px-1">/</span><a class="interne" href="/cours_informatique/cours/système-et-réseau/linux/système-exploitation-linux/">Système d&#39;exploitation Linux</a>

</div>
</div>


    
  

  <blockquote>
<p>TBD à intégrer dans le cours système</p>
<ol>
<li>ordi :</li>
</ol>
<ul>
<li>carte mère</li>
<li>boot</li>
</ul>
<ol start="2">
<li>install linux :
<ul>
<li>système</li>
<li>assembleur avec petit cours.</li>
</ul>
</li>
</ol>
</blockquote>
<blockquote>
<p>TBD strace et ltrace pour voir les appels système et bibliothèques lors du démarrage d'un exécutable : <a href="https://www.youtube.com/watch?v=2AmP7Pse4U0">strace et ltrace</a></p>
</blockquote>
<h2>Distribution Linux</h2>
<p>Noyau commun, reste pas commun et en user space.</p>
<p>Linux s'inscrit dans la logue histoire des systèmes Unix.</p>
<p><code>uname -a</code></p>
<h3>Noyau</h3>
<p>C'est stricto-sensu Linux. Linus Torvalds a créé le noyau Linux (pour voir comment il fonctionne et utiliser x86. remplace <a href="https://fr.wikipedia.org/wiki/Minix">Minics</a> ce qui fait suer Tanenbaum)</p>
<p><a href="https://www.youtube.com/watch?v=BGA019kHhwU">Linux protection rings</a></p>
<p>messages du noyau : <code>sudo dmesg</code></p>
<h3>Systemd</h3>
<blockquote>
<p>TBD à étoffer</p>
</blockquote>
<ul>
<li><a href="https://wiki.archlinux.org/title/Systemd">https://wiki.archlinux.org/title/Systemd</a></li>
<li><a href="https://en.wikipedia.org/wiki/Systemd">https://en.wikipedia.org/wiki/Systemd</a></li>
</ul>
<p>Voir l'arbre des process en route : <code>pstree</code>, pour voir que systemd est de pid 1.</p>
<h3>Applications</h3>
<ul>
<li>système (ls, shell, etc) souvent <a href="https://www.gnu.org/">GNU</a>. On dit parfois GNU/Linux (Linux = kernel et GNU applis)</li>
<li>graphique (système de fenêtre : xorg, wayland ; manager)</li>
<li>management des paquets</li>
</ul>
<h3>Systèmes de fichier</h3>
<p>ext4, mais parfois btrfs ou zfs. Transparent pour l'utilisateur ils utilisent tous des inodes.</p>
<p>plus le swap (de moins en moins utile, mais ça coûte pas grand chose d'en avoir)</p>
<p><code>/ec/fstab</code></p>
<ul>
<li><a href="https://doc.ubuntu-fr.org/fsck">fsck</a>, mkfs</li>
<li><code>df -k</code> : systèmes de fichiers, inodes utilisés etc.</li>
</ul>
<h2>Matériel</h2>
<p>Applications moniteur système sur Linux/Ubuntu. Mais aussi en ligne de commande :</p>
<ul>
<li>
<p>cpu :</p>
<ul>
<li><code>lscpu</code></li>
<li><code>cat /proc/cpuinfo</code></li>
<li>cache : <code>lshw -C memory</code> : pour le cache ou <code>sudo dmidecode -t cache</code></li>
<li><a href="http://www.etallen.com/cpuid.html">cpuid</a> pour les processeur x86<br>
(<code>sudo apt install cpuid</code>)</li>
</ul>
</li>
<li>
<p>hardware :</p>
<ul>
<li><code>lshw</code> (pas partout)</li>
<li>mémoire <code>sudo dmidecode</code></li>
<li><code>lspci</code></li>
</ul>
</li>
</ul>
<h2>Utilisateurs et droits</h2>
<p>Une propriétés des fichiers et des process.</p>
<p><code>cat /etc/passwd</code></p>
<p>L'administrateur est <code>root</code>.</p>
<p>et des groups (<code>groups</code>) (ex groupe des gens qui peuvent utiliser sudo)</p>
<p><a href="https://doc.ubuntu-fr.org/permissions">https://doc.ubuntu-fr.org/permissions</a></p>
<p>Droits lire/écrire/exécuter</p>
<h2>Hiérarchie des dossiers dans Linux</h2>
<blockquote>
<p>TBD</p>
</blockquote>
<ul>
<li><code>/tmp</code> et ses droits spéciaux</li>
<li><code>/bin</code>, <code>/usr/bin</code>, <code>/sbin</code></li>
</ul>
<h3>utilisateur</h3>
<ul>
<li><code>/home</code></li>
</ul>
<h3>Configuration</h3>
<p><code>/etc</code></p>
<h3>devices</h3>
<p>dev monte et démonte de façon dynamique les devices (démon <a href="https://wiki.archlinux.org/title/udev">udev</a> de systemd le montrer)</p>
<p><a href="https://linuxjourney.com/lesson/dev-directory">https://linuxjourney.com/lesson/dev-directory</a></p>
<ul>
<li><code>/dev</code> : utilise les devices et les <a href="https://en.wikipedia.org/wiki/Device_file#Pseudo-devices">pseudo-devices</a></li>
<li><code>/sys</code> : manage les devices</li>
</ul>
<p>Met à disposition :</p>
<ul>
<li>les différents matériel :clavier, souris, carte réseau, disques dur, etc</li>
<li>les fichiers : ouverture, exécution</li>
<li>la mémoire : accès et allocation mémoire</li>
</ul>
<h3>autre</h3>
<ul>
<li>proc <code>cat /proc/meminfo</code></li>
<li>tmp et ses droits propres</li>
<li><code>df -k</code> systèmes de fichiers montés et leur usage</li>
</ul>
<h2>Boot</h2>
<p><a href="https://wiki.archlinux.org/title/Arch_boot_process">https://wiki.archlinux.org/title/Arch_boot_process</a></p>
<p><a href="https://doc.ubuntu-fr.org/efibootmgr">Ubntu boot</a></p>
<pre class="language-shell " style="counter-reset: linenumber 0"><code class="language-shell"><span class="token variable">$efibootmgr</span> <span class="token parameter variable">-v</span>
BootCurrent: 0006
Timeout: <span class="token number">0</span> seconds
BootOrder: 0006,0002,0001,0004,0005,0000,0003
Boot0000* UiApp FvVol<span class="token punctuation">(</span>45801e53-5502-4463-929a-9bafaf424a72<span class="token punctuation">)</span>/FvFile<span class="token punctuation">(</span>462caa21-7614-4503-836e-8ab6f4662331<span class="token punctuation">)</span>
Boot0001* UEFI Virtual DVD-ROM  VenHw<span class="token punctuation">(</span>0d51905b-b77e-452a-a2c0-eca0cc8d514a,000014020000000000<span class="token punctuation">)</span>/Sata<span class="token punctuation">(</span><span class="token number">1,65535</span>,0<span class="token punctuation">)</span>N<span class="token punctuation">..</span><span class="token punctuation">..</span>.YM<span class="token punctuation">..</span><span class="token punctuation">..</span>R,Y.
Boot0002* UEFI Ubuntu Linux-0 SSD NXHA6X9YF73M107S1H1G  VenHw<span class="token punctuation">(</span>0d51905b-b77e-452a-a2c0-eca0cc8d514a,000014020000000000<span class="token punctuation">)</span>/Sata<span class="token punctuation">(</span><span class="token number">0,65535</span>,0<span class="token punctuation">)</span>N<span class="token punctuation">..</span><span class="token punctuation">..</span>.YM<span class="token punctuation">..</span><span class="token punctuation">..</span>R,Y.
Boot0003* UEFI PXEv4 <span class="token punctuation">(</span>MAC:001C42D9009F<span class="token punctuation">)</span> PciRoot<span class="token punctuation">(</span>0x0<span class="token punctuation">)</span>/Pci<span class="token punctuation">(</span>0x5,0x0<span class="token punctuation">)</span>/MAC<span class="token punctuation">(</span>001c42d9009f,1<span class="token punctuation">)</span>N<span class="token punctuation">..</span><span class="token punctuation">..</span>.YM<span class="token punctuation">..</span><span class="token punctuation">..</span>R,Y.
Boot0004* No OS found FvVol<span class="token punctuation">(</span>45801e53-5502-4463-929a-9bafaf424a72<span class="token punctuation">)</span>/FvFile<span class="token punctuation">(</span>343e8cc7-cbc7-4d2f-af94-e783b827053b<span class="token punctuation">)</span>
Boot0005* UEFI Shell  FvVol<span class="token punctuation">(</span>45801e53-5502-4463-929a-9bafaf424a72<span class="token punctuation">)</span>/FvFile<span class="token punctuation">(</span>7c04a583-9e3e-4f1c-ad65-e05268d0b4d1<span class="token punctuation">)</span>
Boot0006* ubuntu  HD<span class="token punctuation">(</span><span class="token number">1</span>,GPT,bd044e84-32c0-428f-8e3a-f5f464891a18,0x800,0x100000<span class="token punctuation">)</span>/File<span class="token punctuation">(</span><span class="token punctuation">\</span>EFI<span class="token punctuation">\</span>ubuntu<span class="token punctuation">\</span>grubaa64.efi<span class="token punctuation">)</span>
</code></pre>
<ol>
<li>EFI</li>
<li><a href="https://fr.wikipedia.org/wiki/GNU_GRUB">grub2</a></li>
<li><a href="https://en.wikipedia.org/wiki/Vmlinux">noyau</a> (kernel space) <code>/boot/vmlinuz</code>
<ol>
<li>cpu inspection</li>
<li>mémoire inspection</li>
<li>devices discovrey</li>
<li>sous-systèmes : réseau, ...</li>
</ol>
</li>
<li>root filesystem mount</li>
<li><a href="https://wiki.archlinux.org/title/Systemd">systemd</a> (user space) <code>systemctl list-units</code>, <code>journaltcl</code></li>
<li>login</li>
</ol>
<h2>process</h2>
<p><a href="https://linux.goffinet.org/administration/processus-et-demarrage/processus-linux/">https://linux.goffinet.org/administration/processus-et-demarrage/processus-linux/</a></p>
<p>utilisation, qui, permission</p>
<p><code>sudo apt install htop</code></p>
<p>htop et tree pour voir les process<br>
<a href="https://unix.stackexchange.com/questions/6301/how-do-i-read-from-proc-pid-mem-under-linux">https://unix.stackexchange.com/questions/6301/how-do-i-read-from-proc-pid-mem-under-linux</a></p>
<h3>process layout</h3>
<ul>
<li><a href="https://simonis.github.io/Memory/">Layout en mémoire</a></li>
<li><a href="https://xerocrypt.github.io/articles/linux-process-analysis.html">process segments</a></li>
<li><code>cat /proc/self/map</code></li>
<li><code>pmap pid</code></li>
</ul>
<h3>kernel layout</h3>
<ul>
<li>ARM : <a href="https://www.kernel.org/doc/html/v6.5/arch/arm64/memory.html">https://www.kernel.org/doc/html/v6.5/arch/arm64/memory.html</a></li>
<li>x64 : <a href="https://www.kernel.org/doc/html/v6.5/arch/index.html">https://www.kernel.org/doc/html/v6.5/arch/index.html</a></li>
</ul>
<h3>appels systèmes</h3>
<ul>
<li><a href="https://fr.linux-console.net/?p=3438#gsc.tab=0"><code>strace -T ls</code></a></li>
<li><a href="https://www.youtube.com/playlist?list=PLn6POgpklwWq1YUQsMHzddjoiwJzPiqcf">https://www.youtube.com/playlist?list=PLn6POgpklwWq1YUQsMHzddjoiwJzPiqcf</a></li>
</ul>
<h3>process info</h3>
<p><a href="https://linux-kernel-labs.github.io/refs/heads/master/so2/lec3-processes.html">https://linux-kernel-labs.github.io/refs/heads/master/so2/lec3-processes.html</a></p>
<p><code>ps -ef</code> pour voir les thread du kernel (entre crochet)</p>
<h3>signaux</h3>
<p><a href="https://www.tutorialspoint.com/unix/unix-signals-traps.htm">Signaux et trap Linux</a></p>
<ul>
<li>liste des signaux : <code>kill -l</code></li>
<li>signaux envoyés au groupe, par exemple pour un pipe : (<code>yes | rm *</code>) un ctrl+c va tuer les deux process et pas qu'un seul.</li>
</ul>
<h2>fichiers exécutables</h2>
<ul>
<li><a href="https://lwn.net/Articles/631631/">format elf</a></li>
<li><code>readelf -a /bin/ls</code></li>
</ul>
<ol>
<li><code>objdump -s /bin/ls | less</code> chercher <code>.text</code></li>
<li><code>objdump -D /bin/ls | less</code> chercher <code>.text</code></li>
<li><code>ldd /usr/bin/ls</code> pour voir les bibliothèques partagées</li>
</ol>
<h2>ext4</h2>
<ul>
<li><a href="https://www.youtube.com/watch?v=B6kg2zeJ9do">résumé ext4</a> avec des commandes</li>
<li><a href="https://www.tecmint.com/check-inodes-in-linux/">inodes</a> (<code>ls -lai</code>, <code>stat file</code> et <code>du</code>)</li>
<li>programmes <a href="https://fr.wikipedia.org/wiki/E2fsprogs">e2fsprogs</a> :
<ul>
<li><code>sudo dumpe2fs /dev/sda2</code> (lire le superblock)</li>
</ul>
</li>
</ul>
<p><a href="https://ext4.wiki.kernel.org/index.php/Ext4_Disk_Layout">https://ext4.wiki.kernel.org/index.php/Ext4_Disk_Layout</a><br>
et <a href="https://blogs.oracle.com/linux/post/understanding-ext4-disk-layout-part-1">https://blogs.oracle.com/linux/post/understanding-ext4-disk-layout-part-1</a> :</p>
<ol>
<li><code>sudo tune2fs -l /dev/sda2</code> (retrouve le blocsize)</li>
<li><code>sudo dd if=/dev/sda2 bs=4096 count=1 | hexdump -C</code></li>
<li>retrouve-t-on le bon nombre d'inodes ?</li>
</ol>


</article>
    </main>

    <footer class="min-h-[50px] border-t-2 border-gray-200 mt-4">
      <div class="max-w-[1200px] mx-auto px-4 relative">
        <div class="min-h-[50px] flex justify-center items-center">
          <p>
            Cours d'informatique à l'école centrale Marseille
          </p>
        </div>
        <div class="min-h-[50px] flex justify-center items-center absolute right-0 top-0">
          <button onclick="goTop()" id="myBtn" title="Go to top">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 11.25l-3-3m0 0l-3 3m3-3v7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </button>

          <button onclick="goBottom()" id="myBtn" title="Go to top">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75l3 3m0 0l3-3m-3 3v-7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </button>
        </div>

      </div>
    </footer>

    <script>
      MathJax
        .startup
        .document
        .getMathItemsWithin(document.body);
    </script>

  </body>
</html>